<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head> 
    <title>Dijit Tree with Checkboxes </title>     
<!--
		NOTE:	When changing themes, the <body class=xxx> MUST change accordingly.
		
    <link rel="stylesheet" href="../../dijit/themes/claro/claro.css" />
    <link rel="stylesheet" href="../themes/claro/claro.css" />

    <link rel="stylesheet" href="../../dijit/themes/soria/soria.css" />
    <link rel="stylesheet" href="../themes/soria/soria.css" />

    <link rel="stylesheet" href="../../dijit/themes/tundra/tundra.css" />
    <link rel="stylesheet" href="../themes/tundra/tundra.css" />

    <link rel="stylesheet" href="../../dijit/themes/nihilo/nihilo.css" />
    <link rel="stylesheet" href="../themes/nihilo/nihilo.css" />

-->
    <link rel="stylesheet" href="../../dijit/themes/nihilo/nihilo.css" />
    <link rel="stylesheet" href="../themes/nihilo/nihilo.css" />

		<script type="text/javascript">
			var dojoConfig = {
            async: true,
            parseOnLoad: true,
            isDebug: true,
            baseUrl: "../../",
            packages: [
              { name: "dojo",  location: "dojo" },
              { name: "dijit", location: "dijit" },
              { name: "cbtree",location: "cbtree" }
            ]
			};
		</script>

    <script type="text/javascript" src="../../dojo/dojo.js"></script> 

  </head>
    
  <body class="nihilo">
    <div id="CheckboxTree">	
      <script type="text/javascript">

      require([
        "dojo/_base/array",
        "dojo/dom",
        "dojo/data/ItemFileWriteStore",
        "cbtree"
        ], function( array, dom, ItemFileWriteStore, cbtree ) {

          function unCheckParents( checkBoxes ) {
            array.forEach( checkBoxes, function( checkbox ) {
              console.log( "Checkbox state: " + this.get( checkbox, "checked" )); 
              this.set( checkbox, "checked", false );
              }, this )
          };

          function updates( matches, updates ) {
            alert( "Query matches: " + matches + ", Updates: " + updates );
          };

          var store = new ItemFileWriteStore( { url: "../datastore/Family-1.7.json" });
          var model = new cbtree.StoreModel( {
                  store: store,
                  query: {type: 'parent'},
                  rootLabel: 'The Family',
                  checkedAll:  true,
                  checkedRoot: true,
                  checkedState: true,
                  checkedStrict: true
                  }); 
          var tree = new cbtree.Tree( {
                  model: model,
                  id: "MenuTree",
                  checkboxMultiState: true,
                  branchReadOnly: false,
                  branchIcons: true,
                  nodeIcons: true
                  });
          tree.placeAt( "CheckboxTree" );

//        tree.model.getStoreItems( {name: "*", type : "parent" }, unCheckParents );
//        tree.model.check( "John", updates, this );

        });
      </script>
    </div>
  </body> 
</html>